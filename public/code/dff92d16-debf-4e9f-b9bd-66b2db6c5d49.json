{
  "id": "nodes/dff92d16-debf-4e9f-b9bd-66b2db6c5d49",
  "name": "convert",
  "node_type": "function",
  "qname": "Jarvis.processing.extProcessor.ExtProcessor.convert",
  "file_path": "/Users/yared/Documents/Programing/personal/pythonJaRvis.github.io/Jarvis/tool/Jarvis/processing/extProcessor.py",
  "file_name": "extProcessor",
  "code": "def convert(self, curStr):\n    \"\"\"ID: dff92d16-debf-4e9f-b9bd-66b2db6c5d49\"\"\"\n    def dfs(curStr: str):\n        \"\"\"ID: 097db680-c3d9-4ee1-b1e2-c7d133cdfd2e\"\"\"\n        queue = [curStr]\n        visited = set()\n        while queue:\n            cur = queue[0]\n            queue.remove(cur)\n            if cur in [\"<map>\", \"<int>\", \"<str>\", \"<list>\"]:\n                visited.add(cur)\n                continue\n            curDefi: Definition = self.def_manager.get(cur)\n            if not curDefi:\n                visited.add(cur)\n                continue\n            if curDefi.get_type() in [\n                utils.constants.NAME_DEF,\n                utils.constants.NA_DEF,\n                utils.constants.PARAM_DEF,\n                utils.constants.RETURN_DEF,\n            ]:\n                PointValueList = curDefi.get_last_point_value()\n                visited = visited.union(set(PointValueList))\n                for pointValue in PointValueList:\n                    if pointValue not in visited:\n                        queue.append(pointValue)\n                continue\n            if curDefi.get_type() == utils.constants.INT_DEF:\n                visited.add(\"<int>\")\n            if curDefi.get_type() == utils.constants.STR_DEF:\n                visited.add(\"<str>\")\n            if curDefi.get_type() == utils.constants.LIST_DEF:\n                visited.add(\"<list>\")\n            if curDefi.get_type() == utils.constants.MAP_DEF:\n                visited.add(\"<map>\")\n            if \"<str>\" in curDefi.get_ns():\n                visited.add(\"<str>\")\n            if \"<list>\" in curDefi.get_ns():\n                visited.add(\"<list>\")\n            if \"<dict>\" in curDefi.get_ns():\n                visited.add(\"<dict>\")\n            if \"<int>\" in curDefi.get_ns():\n                visited.add(\"<int>\")\n            visited.add(cur)\n        return visited\n\n    if curStr in [\"<map>\", \"<int>\", \"<str>\", \"<list>\"]:\n        return [curStr]\n    curDefi: Definition = self.def_manager.get(curStr)\n    if not curDefi and curStr in self.change_manager.getChange(self.current_ns):\n        changedItem: ChangeItem = self.change_manager.getChange(self.current_ns)[\n            curStr\n        ]\n        res = []\n        pointValueList = changedItem.get_last_point_value()\n        for point in pointValueList:\n            if point in res:\n                continue\n            # res += self.convert(point)\n            res += dfs(point)\n        return list(set(res))\n    if not curDefi:\n        return [curStr]\n    if curDefi.get_type() in [\n        utils.constants.NAME_DEF,\n        utils.constants.NA_DEF,\n        utils.constants.PARAM_DEF,\n        utils.constants.RETURN_DEF,\n    ]:\n        curDefiList = curDefi.get_last_point_value()\n        if curStr in self.change_manager.getChange(self.current_ns):\n            curDefiList = (\n                curDefiList\n                | self.change_manager.getChange(self.current_ns)[\n                    curStr\n                ].get_last_point_value()\n            )\n        nsList = []\n        for curDefiNs in curDefiList:\n            # tmpList = self.convert(curDefiNs)\n            tmpList = dfs(curDefiNs)\n            for tmp in tmpList:\n                if tmp in nsList:\n                    continue\n                else:\n                    nsList.append(tmp)\n            nsList = list(set(nsList))\n        return nsList\n    if curDefi.get_type() == utils.constants.INT_DEF:\n        return [\"<int>\"]\n    if curDefi.get_type() == utils.constants.STR_DEF:\n        return [\"<str>\"]\n    if curDefi.get_type() == utils.constants.LIST_DEF:\n        return [\"<list>\"]\n    if curDefi.get_type() == utils.constants.MAP_DEF:\n        return [\"<map>\"]\n    return [curStr]\n",
  "position": {
    "line_no": 1950,
    "col_offset": 4,
    "end_line_no": 2048,
    "end_col_offset": 0
  }
}