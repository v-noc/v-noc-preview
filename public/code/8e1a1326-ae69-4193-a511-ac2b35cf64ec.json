{
  "id": "nodes/8e1a1326-ae69-4193-a511-ac2b35cf64ec",
  "name": "decode_node",
  "node_type": "function",
  "qname": "Jarvis.processing.base.ProcessingBase.decode_node",
  "file_path": "/Users/yared/Documents/Programing/personal/pythonJaRvis.github.io/Jarvis/tool/Jarvis/processing/base.py",
  "file_name": "base",
  "code": "def decode_node(self, node):\n    \"\"\"ID: 8e1a1326-ae69-4193-a511-ac2b35cf64ec\"\"\"\n    if isinstance(node, ast.Name):\n        return [self.scope_manager.get_def(self.current_ns, node.id)]\n    elif isinstance(node, ast.Call):\n        decoded = self.decode_node(node.func)\n        return_defs = []\n        for called_def in decoded:\n            if not isinstance(called_def, Definition):\n                continue\n            return_ns = utils.constants.INVALID_NAME\n            # \u5982\u679c\u6536func\uff0c\u5219\u6307\u5411\u5176\u8fd4\u56de\u503c\n            if called_def.get_type() == utils.constants.FUN_DEF:\n                return_ns = utils.join_ns(\n                    called_def.get_ns(), utils.constants.RETURN_NAME)\n            #     \u5982\u679c\u662fcls\uff0c\u6307\u5411\u5176\u7c7b\n            elif called_def.get_type() == utils.constants.CLS_DEF:\n                return_ns = called_def.get_ns()\n            #     \u5982\u679c\u662fext\uff0c\u6307\u5411\u5176\u7c7b\uff0c\u7136\u540e\u5728\u540e\u7eed\u7684\u89e3\u6790\u4e2d\u5b8c\u5584\n            elif called_def.get_type() == utils.constants.EXT_DEF:\n                return_ns = called_def.get_ns()\n            defi = self.def_manager.get(return_ns)\n            if defi:\n                return_defs.append(defi)\n\n        return return_defs\n    elif isinstance(node, ast.Lambda):\n        lambda_counter = self.scope_manager.get_scope(\n            self.current_ns).get_lambda_counter()\n        lambda_name = utils.get_lambda_name(lambda_counter)\n        return [self.scope_manager.get_def(self.current_ns, lambda_name)]\n    elif isinstance(node, ast.Tuple):\n        decoded = []\n        for elt in node.elts:\n            decoded.append(self.decode_node(elt))\n        return decoded\n    elif isinstance(node, ast.BinOp):\n        decoded_left = self.decode_node(node.left)\n        decoded_right = self.decode_node(node.right)\n        # return the non definition types if we're talking about a binop\n        # since we only care about the type of the return (num, str, etc)\n        if not isinstance(decoded_left, Definition):\n            return decoded_left\n        if not isinstance(decoded_right, Definition):\n            return decoded_right\n    elif isinstance(node, ast.Attribute):\n        names = self._retrieve_attribute_names(node)\n        defis = []\n        for name in names:\n            defi = self.def_manager.get(name)\n            if defi:\n                defis.append(defi)\n        return defis\n    elif isinstance(node, ast.Num):\n        return [node.n]\n    elif isinstance(node, ast.Str):\n        return [node.s]\n    elif self._is_literal(node):\n        return [node]\n    elif isinstance(node, ast.Dict):\n        dict_counter = self.scope_manager.get_scope(\n            self.current_ns).get_dict_counter()\n        dict_name = utils.get_dict_name(dict_counter)\n        scope_def = self.scope_manager.get_def(self.current_ns, dict_name)\n        return [self.scope_manager.get_def(self.current_ns, dict_name)]\n    elif isinstance(node, ast.List):\n        list_counter = self.scope_manager.get_scope(\n            self.current_ns).get_list_counter()\n        list_name = utils.get_list_name(list_counter)\n        scope_def = self.scope_manager.get_def(self.current_ns, list_name)\n        return [self.scope_manager.get_def(self.current_ns, list_name)]\n    elif isinstance(node, ast.Subscript):\n        names = self.retrieve_subscript_names(node)\n        defis = []\n        for name in names:\n            defi = self.def_manager.get(name)\n            if defi:\n                defis.append(defi)\n        return defis\n\n    return []\n",
  "position": {
    "line_no": 271,
    "col_offset": 4,
    "end_line_no": 352,
    "end_col_offset": 0
  }
}