{
  "id": "nodes/ce075edb-58d3-4c12-8ffd-2ef84e23ec4d",
  "name": "do_assign",
  "node_type": "function",
  "qname": "Jarvis.processing.extProcessor.ExtProcessor._visit_assign.do_assign",
  "file_path": "/Users/yared/Documents/Programing/personal/pythonJaRvis.github.io/Jarvis/tool/Jarvis/processing/extProcessor.py",
  "file_name": "extProcessor",
  "code": "def do_assign(decoded, target):\n    \"\"\"ID: ce075edb-58d3-4c12-8ffd-2ef84e23ec4d\"\"\"\n    self.visit(target)\n    try:\n        iter(decoded)\n    except TypeError:\n        return\n    # decoded = list(filter(lambda x: x is not None, decoded))\n    if isinstance(target, ast.Tuple):\n        for pos, elt in enumerate(target.elts):\n            if not isinstance(decoded, Definition) and pos < len(decoded):\n                do_assign(decoded[pos], elt)\n    else:\n        if isinstance(target, ast.Name):\n            curNsDefi: Definition = self.def_manager.get(\n                self.current_ns)\n            if curNsDefi.get_type() not in [\n                utils.constants.IF_DEF,\n                utils.constants.WHILE_DEF,\n                utils.constants.ELSE_DEF,\n            ]:\n                assign(self._get_target_ns(target), decoded)\n            else:\n                leftTarget = self.scope_manager.get_def(\n                    self.current_ns, target.id\n                )\n                if not leftTarget:\n                    leftTargetNs = utils.join_ns(\n                        self.current_ns, target.id)\n                    leftTargetDefi = self.def_manager.create(\n                        leftTargetNs, utils.constants.NAME_DEF\n                    )\n                    self.scope_manager.handle_assign(\n                        self.current_ns, target.id, leftTargetDefi\n                    )\n                assign(self.decode_node(target), decoded)\n        elif isinstance(target, ast.Attribute):\n            store(self.decode_node(target.value), target.attr, decoded)\n        elif isinstance(target, ast.Subscript):\n            decoded = self.flatten(decoded)\n            decoded = list(filter(lambda x: x is not None, decoded))\n            # leftList = self.getYPOint(target.lineno,self._get_target_ns(target.value))\n            leftList = self.getYPOint(\n                target.lineno, self.decode_node(target.value))\n\n            # left = self.getYPOint(row,self.decode_node(target.value))\n            for left in leftList:\n                leftDefi: Definition = self.def_manager.get(left)\n                if not leftDefi or leftDefi.get_type() not in [utils.constants.LIST_DEF,\n                                                               utils.constants.MAP_DEF]:\n                    continue\n                if getattr(target.slice, \"value\", None) is not None and self._is_literal(target.slice.value):\n                    sl_names = [target.slice.value]\n                else:\n                    # sl_names = self.decode_node(target.slice)\n                    sl_names = self.decode_node(target.value)\n                keys = set()\n                for s in sl_names:\n                    if isinstance(s, Definition):\n                        keys.add(s.get_ns())\n                    elif isinstance(s, str):\n                        keys.add(s)\n                    elif isinstance(s, int):\n                        keys.add(s)\n                for key in keys:\n                    for x in decoded:\n                        if not x:\n                            print()\n                    leftDefi.set_element(key, list(\n                        map(lambda x: x.get_ns() if isinstance(x, Definition) else x, decoded)))\n",
  "position": {
    "line_no": 585,
    "col_offset": 8,
    "end_line_no": 655,
    "end_col_offset": 0
  }
}