{
  "id": "nodes/b5c0dbc1-dd37-426f-8bc7-107c1fec9874",
  "name": "ScopeManager",
  "node_type": "class",
  "qname": "Jarvis.machinery.scopes.ScopeManager",
  "file_path": "/Users/yared/Documents/Programing/personal/pythonJaRvis.github.io/Jarvis/tool/Jarvis/machinery/scopes.py",
  "file_name": "scopes",
  "code": "class ScopeManager(object):\n    \"\"\"Manages the scope entries\n\nID: b5c0dbc1-dd37-426f-8bc7-107c1fec9874\"\"\"\n\n    def __init__(self):\n        \"\"\"ID: eac32f56-f89f-49e2-8c67-3f3979c9892a\"\"\"\n        self.scopes = {}\n        self.copySeq = {}\n    def handle_module(self, modulename, filename, contents):\n        \"\"\"ID: 330b1663-4ce7-4c2f-96ba-4a10746e261c\"\"\"\n        functions = []\n        classes = []\n        def process(namespace, parent, table):\n            \"\"\"ID: 6c4f4996-b235-4c8a-96c4-48f660a59f8a\"\"\"\n            name = table.get_name() if table.get_name() != 'top' else ''\n            if name:\n                fullns = utils.join_ns(namespace, name)\n            else:\n                fullns = namespace\n\n            if table.get_type() == \"function\":\n                functions.append(fullns)\n\n            if table.get_type() == \"class\":\n                classes.append(fullns)\n\n            sc = self.create_scope(fullns, parent)\n\n            for t in table.get_children():\n                process(fullns, sc, t)\n\n        process(modulename, None, symtable.symtable(contents, filename, compile_type=\"exec\"))\n        return {\"functions\": functions, \"classes\": classes}\n\n    def add_defi(self, ns, target, defi):\n        \"\"\"ID: 07f6481d-bf49-472b-bc0a-79265f32882c\"\"\"\n        scope = self.get_scope(ns)\n        if scope:\n            scope.add_def(target, defi)\n\n    def handle_assign(self, ns, target, defi):\n        \"\"\"ID: 01c87278-e130-4c10-b93d-7d6ed4759c86\"\"\"\n        scope = self.get_scope(ns)\n        if scope:\n            scope.add_def(target, defi)\n    def add_params(self, ns, defi):\n        \"\"\"ID: 4278a582-8c6b-4cf8-a456-a1d94b146c64\"\"\"\n        scope = self.get_scope(ns)\n        if scope:\n            scope.add_params(defi)\n    def get_def(self, current_ns, var_name):\n        \"\"\"ID: 589bdc56-392f-4563-a500-6fe3f7ed02b9\"\"\"\n        current_scope = self.get_scope(current_ns)\n        while current_scope:\n            defi= current_scope.get_def(var_name)\n            if defi:\n                return defi\n            current_scope = current_scope.parent\n    def get_scope(self, namespace):\n        \"\"\"ID: a56f2399-550d-4f4f-ac01-7fbc376da65a\"\"\"\n        if namespace in self.get_scopes():\n            return self.get_scopes()[namespace]\n\n    def create_scope(self, namespace, parent):\n        \"\"\"ID: e077c12e-0188-450f-bd11-14d9fc167350\"\"\"\n        if not namespace in self.scopes:\n            sc = ScopeItem(namespace, parent)\n            self.scopes[namespace] = sc\n        return self.scopes[namespace]\n\n    def create_scope_by_name(self,dict_name,namespace,parent):\n        \"\"\"ID: f4962a58-3cc8-4edd-ad40-8840262cf5ec\"\"\"\n        if not namespace in self.scopes:\n            sc = ScopeItem(namespace, parent)\n            self.scopes[dict_name] = sc\n        return self.scopes[dict_name]\n    def add_scope(self,namespace,item,parent):\n        \"\"\"ID: 1ba80ada-c029-47bd-aef4-98e97da67d8b\"\"\"\n        if not namespace in self.scopes:\n            self.scopes[namespace] = item\n            item.parent = parent\n    def get_scopes(self):\n        \"\"\"ID: 2bdff7c1-2adb-4bca-b147-5d34949050f6\"\"\"\n        return self.scopes\n\n    def add_seq(self,ns):\n        \"\"\"ID: 15d91822-86e9-4cac-a6ef-aa8645efa5cf\"\"\"\n        if ns in self.copySeq:\n            self.copySeq[ns] += 1\n        else:\n            self.copySeq[ns] = 1\n        return self.copySeq[ns]\n\n    def get_seq(self,ns):\n        \"\"\"ID: 45d0ec9c-2b7b-4188-8b80-c3f655c231e6\"\"\"\n        if ns in self.copySeq:\n            return self.copySeq[ns]\n        return 0\n\n    def add_inputs(self,ns,*args):\n        \"\"\"ID: b4d1dfa1-4a1d-42b5-9fc7-62d6d8ad616c\"\"\"\n        scope = self.get_scope(ns)\n        if scope:\n            scope.add_inputs(args)\n",
  "position": {
    "line_no": 28,
    "col_offset": 0,
    "end_line_no": 133,
    "end_col_offset": 0
  }
}