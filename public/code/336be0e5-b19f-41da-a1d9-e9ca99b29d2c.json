{
  "id": "nodes/336be0e5-b19f-41da-a1d9-e9ca99b29d2c",
  "name": "visit_ClassDef",
  "node_type": "function",
  "qname": "Jarvis.processing.extProcessor.ExtProcessor.visit_ClassDef",
  "file_path": "/Users/yared/Documents/Programing/personal/pythonJaRvis.github.io/Jarvis/tool/Jarvis/processing/extProcessor.py",
  "file_name": "extProcessor",
  "code": "def visit_ClassDef(self, node):\n    \"\"\"ID: 336be0e5-b19f-41da-a1d9-e9ca99b29d2c\"\"\"\n    cls_ns = self._handle_ns()\n    cls_def: Definition = self.def_manager.handle_class_def(\n        self.current_ns, node.name, cls_ns\n    )\n    cls_scope: ScopeItem = self.scope_manager.get_scope(cls_def.get_ns())\n    if not self.scope_manager.get_scope(cls_def.get_ns()):\n        cls_scope = self.scope_manager.create_scope(\n            cls_def.get_ns(), self.scope_manager.get_scope(cls_ns)\n        )\n    cls: ClassNode = self.class_manager.get(cls_def.get_ns())\n    if not cls:\n        cls: ClassNode = self.class_manager.create(\n            cls_def.get_ns(), self.modname)\n    cls_ret = utils.join_ns(cls_def.get_ns(), utils.constants.RETURN_NAME)\n    cls_ret_defi: Definition = self.def_manager.get(cls_ret)\n    cls_self = utils.join_ns(cls_def.get_ns(), \"self\")\n    cls_self_defi: Definition = self.def_manager.get(cls_self)\n    if not cls_ret_defi:\n        cls_ret_defi = self.def_manager.create(\n            cls_ret, utils.constants.RETURN_DEF)\n    cls_scope.add_def(utils.constants.RETURN_NAME, cls_ret_defi)\n    if not cls_self_defi:\n        cls_self_defi = self.def_manager.create(\n            cls_self, utils.constants.NAME_DEF)\n    cls_scope.add_def(\"self\", cls_self_defi)\n    cls_ret_defi.add_value_point(node.lineno, [cls_def.get_ns()])\n    cls_self_defi.add_value_point(node.lineno, [cls_def.get_ns()])\n\n    curScope: ScopeItem = cls_scope.parent\n    if not curScope:\n        return\n    curScope.add_def(node.name, cls_def)\n    cls.clear_mro()\n    for base in node.bases:\n        # all bases are of the type ast.Name\n        self.visit(base)\n        # bases = self.decode_node(base)\n        bases = self.getYPOint(node.lineno, self.decode_node(base))\n        for base in bases:\n            base_def: Definition = self.def_manager.get(base)\n            if not isinstance(base_def, Definition):\n                continue\n            names = set()\n            if base_def.points:\n                names = base_def.get_last_point_value()\n            else:\n                names.add(base_def.get_ns())\n            for name in names:\n                # add the base as a parent\n                cls.add_parent(name)\n                # add the base's parents\n                parent_cls = self.class_manager.get(name)\n                # if parent_cls:\n                #     cls.add_parent(parent_cls.get_mro())\n    mroList = cls.mro\n    for name in mroList:\n        parent_cls = self.class_manager.get(name)\n        if parent_cls:\n            cls.add_parent(parent_cls.get_mro())\n    cls.compute_mro()\n    self.node_manager.add(cls_def.get_ns(), node)\n    self.pushStack(cls_def)\n    pass\n",
  "position": {
    "line_no": 962,
    "col_offset": 4,
    "end_line_no": 1027,
    "end_col_offset": 0
  }
}