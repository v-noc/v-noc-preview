{
  "id": "nodes/285fe901-0e94-49e9-ad71-7d04ab3bc23f",
  "name": "decode_node",
  "node_type": "function",
  "qname": "Jarvis.processing.extProcessor.ExtProcessor.decode_node",
  "file_path": "/Users/yared/Documents/Programing/personal/pythonJaRvis.github.io/Jarvis/tool/Jarvis/processing/extProcessor.py",
  "file_name": "extProcessor",
  "code": "def decode_node(self, node, index=None):\n    \"\"\"ID: 285fe901-0e94-49e9-ad71-7d04ab3bc23f\"\"\"\n    if isinstance(node, ast.Name):\n        return [self.scope_manager.get_def(self.current_ns, node.id)]\n    elif isinstance(node, ast.Call):\n        decoded = self.decode_node(node.func)\n        return_defs = []\n        for call_def in decoded:\n            if not isinstance(call_def, Definition):\n                continue\n            calleeNs = utils.join_ns(\n                call_def.get_ns(), utils.constants.RETURN_NAME)\n            defi = self.def_manager.get(calleeNs)\n            if not defi:\n                defi = self.def_manager.create(\n                    calleeNs, utils.constants.NA_DEF)\n            return_defs.append(defi)\n        return return_defs\n    elif isinstance(node, ast.Lambda):\n        lambda_counter = self.scope_manager.get_scope(\n            self.current_ns\n        ).get_lambda_counter()\n        lambda_name = utils.get_lambda_name(lambda_counter)\n        return [self.scope_manager.get_def(self.current_ns, lambda_name)]\n    elif isinstance(node, ast.Tuple):\n        decoded = []\n        for elt in node.elts:\n            decoded.append(self.decode_node(elt))\n        return decoded\n    elif isinstance(node, ast.BinOp):\n        decoded_left = self.decode_node(node.left)\n        decoded_right = self.decode_node(node.right)\n        if not isinstance(decoded_left, Definition):\n            return decoded_left\n        if not isinstance(decoded_right, Definition):\n            return decoded_right\n    elif isinstance(node, ast.Attribute):\n        names = self.decode_node(node.value)\n        defis = []\n        for name in names:\n            if not isinstance(name, Definition):\n                return defis\n            ns = utils.join_ns(name.get_ns(), node.attr)\n            defi = self.def_manager.get(ns)\n            if defi:\n                defis.append(defi)\n            else:\n                defi = self.def_manager.create(ns, utils.constants.NA_DEF)\n                defis.append(defi)\n        return defis\n    elif isinstance(node, ast.Num):\n        # defiNs = utils.join_ns(self.current_ns, '<int>')\n        defiNs = \"<int>\"\n        defi = self.def_manager.get(defiNs)\n        if not defi:\n            defi = self.def_manager.create(defiNs, utils.constants.INT_DEF)\n        return [defi]\n    elif isinstance(node, ast.Str):\n        defiNs = \"<str>\"\n        defi = self.def_manager.get(defiNs)\n        if not defi:\n            defi = self.def_manager.create(defiNs, utils.constants.STR_DEF)\n        return [defi]\n    elif self._is_literal(node):\n        return [node]\n    # elif isinstance(node, ast.Dict):\n    #     if not self.scope_manager.get_scope(self.current_ns):\n    #         return [\"dict\"]\n    #     dict_counter = self.scope_manager.get_scope(\n    #         self.current_ns\n    #     ).get_dict_counter()\n    #     dict_name = utils.get_dict_name(dict_counter)\n    #     defiNs = utils.join_ns(self.current_ns, dict_name)\n    #     defi = self.def_manager.get(defiNs)\n    #     if not defi:\n    #         defi = self.def_manager.create(defiNs, utils.constants.MAP_DEF)\n    #         self.scope_manager.handle_assign(self.current_ns, dict_name, defi)\n    #     scope_def = self.scope_manager.get_def(self.current_ns, dict_name)\n    #     return [self.scope_manager.get_def(self.current_ns, dict_name)]\n    # elif isinstance(node, ast.List):\n    #     list_counter = self.scope_manager.get_scope(\n    #         self.current_ns\n    #     ).get_list_counter()\n    #     list_name = utils.get_list_name(list_counter)\n    #     defiNs = utils.join_ns(self.current_ns, list_name)\n    #     defi = self.def_manager.get(defiNs)\n    #     if not defi:\n    #         defi = self.def_manager.create(defiNs, utils.constants.LIST_DEF)\n    #         self.scope_manager.handle_assign(self.current_ns, list_name, defi)\n    #     return [self.scope_manager.get_def(self.current_ns, list_name)]\n    elif isinstance(node, ast.Dict):\n        if not index:\n            if not self.scope_manager.get_scope(self.current_ns):\n                return ['dict']\n            dict_counter = self.scope_manager.get_scope(\n                self.current_ns).get_dict_counter()\n            dict_name = utils.get_dict_name(dict_counter)\n            defiNs = utils.join_ns(self.current_ns, dict_name)\n            defi = self.def_manager.get(defiNs)\n            if not defi:\n                defi = self.def_manager.create(\n                    defiNs, utils.constants.MAP_DEF)\n                self.scope_manager.handle_assign(\n                    self.current_ns, dict_name, defi)\n            return [self.scope_manager.get_def(self.current_ns, dict_name)]\n        else:\n            curScope: ScopeItem = self.scope_manager.get_scope(\n                utils.join_ns(self.current_ns))\n            if not curScope:\n                return []\n            dict_counter = curScope.get_dict_counter()\n            dict_name = utils.get_dict_name(dict_counter)\n            defiNs = utils.join_ns(self.current_ns, dict_name, index)\n            defi = self.def_manager.get(defiNs)\n            if not defi:\n                return \"<dict>\"\n            # if not defi:\n            #     defi = self.def_manager.create(defiNs, utils.constants.LIST_DEF)\n            #     self.scope_manager.handle_assign(self.current_ns, list_name, defi)\n            return [defiNs]\n    elif isinstance(node, ast.List):\n        if not index:\n            if not self.scope_manager.get_scope(self.current_ns):\n                return ['list']\n            list_counter = self.scope_manager.get_scope(\n                self.current_ns).get_list_counter()\n            list_name = utils.get_list_name(list_counter)\n            defiNs = utils.join_ns(self.current_ns, list_name)\n            defi = self.def_manager.get(defiNs)\n            if not defi:\n                defi = self.def_manager.create(\n                    defiNs, utils.constants.MAP_DEF)\n                self.scope_manager.handle_assign(\n                    self.current_ns, list_name, defi)\n            return [self.scope_manager.get_def(self.current_ns, list_name)]\n        else:\n            curScope: ScopeItem = self.scope_manager.get_scope(\n                utils.join_ns(self.current_ns))\n            if not curScope:\n                return []\n            list_counter = curScope.get_dict_counter()\n            list_name = utils.get_dict_name(list_counter)\n            defiNs = utils.join_ns(self.current_ns, list_name, index)\n            defi = self.def_manager.get(defiNs)\n            if not defi:\n                return \"<list>\"\n            # if not defi:\n            #     defi = self.def_manager.create(defiNs, utils.constants.LIST_DEF)\n            #     self.scope_manager.handle_assign(self.current_ns, list_name, defi)\n            return [defiNs]\n    elif isinstance(node, ast.Subscript):\n        names = self.retrieve_subscript_names(node)\n        defis = []\n        for name in names:\n            defi = self.def_manager.get(name)\n            if defi:\n                defis.append(defi)\n        return defis\n\n    elif isinstance(node, ast.JoinedStr):\n        return [\"<str>\"]\n    return []\n",
  "position": {
    "line_no": 1028,
    "col_offset": 4,
    "end_line_no": 1190,
    "end_col_offset": 0
  }
}