{
  "id": "nodes/72b1d325-3f41-4c11-a04e-49c273a92cae",
  "name": "_handle_function_def",
  "node_type": "function",
  "qname": "Jarvis.processing.extProcessor.ExtProcessor._handle_function_def",
  "file_path": "/Users/yared/Documents/Programing/personal/pythonJaRvis.github.io/Jarvis/tool/Jarvis/processing/extProcessor.py",
  "file_name": "extProcessor",
  "code": "def _handle_function_def(self, node, fn_name, fn_ns):\n    \"\"\"ID: 72b1d325-3f41-4c11-a04e-49c273a92cae\"\"\"\n    currentNsDefi = self.def_manager.get(fn_ns)\n    defaults = self._get_fun_defaults(node)\n    fn_def: Definition = self.def_manager.handle_function_def(\n        fn_ns, fn_name)\n    fn_scope: ScopeItem = self.scope_manager.get_scope(fn_def.get_ns())\n    if not fn_scope:\n        fn_scope = self.scope_manager.create_scope(\n            fn_def.get_ns(), self.scope_manager.get_scope(fn_ns)\n        )\n    ret_def: Definition = self.def_manager.get(\n        utils.join_ns(fn_def.get_ns(), utils.constants.RETURN_NAME)\n    )\n    fn_scope.add_def(utils.constants.RETURN_NAME, ret_def)\n    modNs = self.get_module_ns(self.current_ns)\n    mod = self.module_manager.get(modNs)\n    if not mod:\n        mod = self.module_manager.create(self.modname, self.filename)\n    mod.add_method(fn_def.get_ns(), node.lineno, self._get_last_line(node))\n    defs_to_create = []\n\n    is_static_method = False\n    tmpargs = node.args.args[:]\n    if hasattr(node, \"decorator_list\"):\n        for decorator in node.decorator_list:\n            if (\n                    isinstance(decorator, ast.Name)\n                    and decorator.id == utils.constants.STATIC_METHOD\n            ):\n                is_static_method = True\n    if (\n            currentNsDefi.get_type() == utils.constants.CLS_DEF\n            and not is_static_method\n            and node.args.args\n    ):\n        arg_ns = utils.join_ns(fn_def.get_ns(), node.args.args[0].arg)\n        arg_def = self.def_manager.get(arg_ns)\n        if not arg_def:\n            arg_def = self.def_manager.create(\n                arg_ns, utils.constants.PARAM_DEF)\n        arg_def.add_value_point(\n            node.lineno, utils.join_ns(currentNsDefi.get_ns(), \"self\")\n        )\n        self.scope_manager.handle_assign(\n            fn_def.get_ns(), node.args.args[0].arg, arg_def\n        )\n        tmpargs = node.args.args[1:]\n\n    for pos, arg in enumerate(tmpargs):\n        arg_ns = utils.join_ns(fn_def.get_ns(), arg.arg)\n        defs_to_create.append(arg_ns)\n\n    for arg in node.args.kwonlyargs:\n        arg_ns = utils.join_ns(fn_def.get_ns(), arg.arg)\n        defs_to_create.append(arg_ns)\n    for arg_ns in defs_to_create:\n        arg_def = self.def_manager.get(arg_ns)\n        if not arg_def:\n            arg_def: Definition = self.def_manager.create(\n                arg_ns, utils.constants.PARAM_DEF\n            )\n        self.scope_manager.handle_assign(\n            fn_def.get_ns(), arg_def.get_name(), arg_def\n        )\n        arg_name = arg_ns.split(\".\")[-1]\n        if defaults.get(arg_name, None):\n            arg_def.add_value_point(node.lineno, defaults[arg_name])\n        self.scope_manager.add_params(fn_def.get_ns(), arg_def)\n    return fn_def\n",
  "position": {
    "line_no": 779,
    "col_offset": 4,
    "end_line_no": 849,
    "end_col_offset": 0
  }
}